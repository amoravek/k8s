<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Co to je Docker?</title>
    <!-- Styles -->
    
    <link rel="stylesheet" href="file:///usr/lib/python3/dist-packages/darkslide/themes/default/css/base.css">
    <link rel="stylesheet" media="print" href="file:///usr/lib/python3/dist-packages/darkslide/themes/default/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="file:///usr/lib/python3/dist-packages/darkslide/themes/default/css/screen.css">
    <link rel="stylesheet" media="all" href="file:///usr/lib/python3/dist-packages/darkslide/themes/default/css/theme.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="file:///usr/lib/python3/dist-packages/darkslide/themes/default/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-1">
          <div class="inner">
            
            <header><h1>Co to je Docker?</h1></header>
            
            
            <section>
<h1>...je to nástroj, který umožňuje:</h1>
<ul>
<li>vytvořit artefakt schopný běhu všude tam, kde je Docker</li>
<li>zapouzdřit aplikaci včetně jejího prostředí</li>
<li>redukovat problémy při nasazování aplikací</li>
<li>řešit podobné úlohy jako VM</li>
</ul>


<h1></h1>
<h1></h1>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>zminit napr. komplexitu nasazeni webapp na vice AS, vice OS, apod.</p><p>redukce problemu = redukuje pacive problemy dneska, prinasi ale nove (nova tech.)</p>
            
            </section>
          </div>
          <footer>
            
              Základy Docker a Kubernetes 01/2021
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              1/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-2">
          <div class="inner">
            
            <header><h1>Srovnání s VM</h1></header>
            
            
            <section>
<p><img alt="docker-vs-vm" src="file:///home/amoravek/projects/trask/k8s-skoleni/presentation/docker-vs-vm.png" /></p>

</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>zmínit prakticky okamžité spuštění oproti nutnosti bootu VM</p><p>zmínit řádové snížení velikosti image oproti VM</p>
            
            </section>
          </div>
          <footer>
            
              [5 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              2/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-3">
          <div class="inner">
            
            <header><h1>Linux kernel</h1></header>
            
            
            <section>
<ul>
<li>Docker je produkt založený na vlastnostech a funkcích jádra <strong>Linuxu</strong></li>
<li>nefunguje nativně např. na AIX, Windows ani macOS (jen s virtualizační mezivrstvou nebo s plnohodnotným Linuxem jako součástí OS)</li>
<li>všechny kontejnery (viz dále) sdílí s host OS jeho linux kernel</li>
<li>kontejnery nejsou nic jiného než běžné procesy uzavřené do vlastního namespace a se zdroji omezenými za pomocí control groups (obojí funkce linuxového jádra)</li>
<li>kontejner tedy není žádný "aktivní obal", ale jen logicky izolovaný proces, který se tváří jako samostatná VM</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              3/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-4">
          <div class="inner">
            
            <header><h1>Motivace</h1></header>
            
            
            <section>
<ul>
<li>distribuce neměnného balíčku (=docker image) k zákazníkovi</li>
<li>image se nedají měnit, ale může se z nich <em>dědit</em></li>
<li>docker image obsahuje vše potřebné pro spuštění aplikace</li>
<li>image lze digitálně podepsat</li>
<li>součástí image i kompletní souborový systém OS - např. OS CVE lze řešit rebuildem image</li>
<li>image se verzují</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              4/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_footer slide-5">
          <div class="inner">
            
            <header><h1>Image</h1></header>
            
            
            <section>
<h2>Co je vlastně image?</h2>
<ul>
<li>lze si představit jako .tar.gz souborového systému OS + nějaká metadata</li>
<li><em>image</em> je vždy read-only, vytváří se <em>buildem</em></li>
<li>image se většinou zakládá na nějakém již existujícím - např. JDK image dědí z Alpine linux image a dodá instalaci JDK</li>
</ul>
<h1></h1>
<div class="highlight"><pre><span></span><span class="lineno">1 </span><span class="k">FROM</span><span class="s"> alpine</span>
<span class="lineno">2 </span><span class="k">RUN</span> &lt;instalace jdk&gt;
</pre></div>

<h1></h1>
<p>(je to něco jako vzít souborový systém Alpine linuxu, nakopírovat tam JDK, zazipovat a obalit metadaty)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              5/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_footer slide-6">
          <div class="inner">
            
            <header><h1>Parent a base image</h1></header>
            
            
            <section>
<ul>
<li>parent image referencován instrukcí <code>FROM</code></li>
<li>parent images dostupné např. na Docker HUB</li>
<li>kde je ale root image? Je to image s <code>FROM scratch</code>, ale častěji se vytváří importem zazipovaného souborového systému:</li>
</ul>


<h1></h1>
<div class="highlight"><pre><span></span><span class="lineno"> 1 </span>$ sudo debootstrap xenial xenial &gt; /dev/null
<span class="lineno"> 2 </span>$ sudo tar -C xenial -c . <span class="p">|</span> docker import - xenial
<span class="lineno"> 3 </span>
<span class="lineno"> 4 </span>a29c15f1bf7a
<span class="lineno"> 5 </span>
<span class="lineno"> 6 </span>$ docker run xenial cat /etc/lsb-release
<span class="lineno"> 7 </span>
<span class="lineno"> 8 </span><span class="nv">DISTRIB_ID</span><span class="o">=</span>Ubuntu
<span class="lineno"> 9 </span><span class="nv">DISTRIB_RELEASE</span><span class="o">=</span><span class="m">16</span>.04
<span class="lineno">10 </span><span class="nv">DISTRIB_CODENAME</span><span class="o">=</span>xenial
<span class="lineno">11 </span><span class="nv">DISTRIB_DESCRIPTION</span><span class="o">=</span><span class="s2">&quot;Ubuntu 16.04 LTS&quot;</span>
</pre></div>

<h1></h1>
<h1></h1></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>zmínit absenci init</p><p>scratch je rezervovaný název - prázdný parent image</p>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              6/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-7">
          <div class="inner">
            
            <header><h1>Kontejner</h1></header>
            
            
            <section>
<ul>
<li><em>kontejner</em> je vlastní aktivní proces spuštěný nad souborovým systémem z image (lze si představit jako <em>instanci</em> image)</li>
<li>spuštění kontejneru s aplikací = spuštění procesu aplikace na systému, kde běží Docker daemon, ale proces je izolován ve vlastním <em>namespace</em> a běží jako root proces (PID 1)</li>
<li>root procesem host OS je zpravidla initd nebo systemd - kontejner init proces nemá, protože nebootuje, začíná přímo spuštěním procesu</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              7/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-8">
          <div class="inner">
            
            <header><h1>Docker daemon</h1></header>
            
            
            <section>
<ul>
<li>proces běžící na pozadí</li>
<li>spravuje Docker objekty (image, kontejnery, síť, úložiště)</li>
<li>občas je potřeba změnit konfiguraci: /etc/docker/daemon.json (typicky kvůli insecure registry)</li>
<li>musí běžet jako root - často terčem kritiky (v kombinaci s root právy uživatele v kontejneru)</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              8/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-9">
          <div class="inner">
            
            <header><h1>OCI</h1></header>
            
            
            <section>
<ul>
<li>Open Container Initiative</li>
<li>představuje otevřený standard rozhraní container runtime a formátu image</li>
<li>díky OCI mohlo Kubernetes opustit docker daemon a přejít na containerd</li>
<li>vzhledem k raketovému rozvoji kontejnerizace je OCI nutnost</li>
<li>mezi OCI-compliant runtime patří např. docker, cri-o a containerd (docker již ale interně používá containderd)</li>
</ul>
<h1></h1></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              9/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-10">
          <div class="inner">
            
            <header><h1>Docker CLI</h1></header>
            
            
            <section>
<ul>
<li>základní (a naprosto dostačující) utilita pro vytváření, správu a manipulaci s docker objekty</li>
<li>build image: <code>docker build -t myimage:1.0</code> .</li>
<li>spuštění kontejneru: <code>docker run -d -name mycont1 -p 8088:8080 myimage:1.0</code></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              10/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-11">
          <div class="inner">
            
            <header><h1>Dockerfile</h1></header>
            
            
            <section>
<ul>
<li>textový soubor obsahující instrukce pro build image</li>
<li>proprietární formát</li>
<li>pokud není určeno jinak, předpokládá se název <code>Dockerfile</code></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              11/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_footer slide-12">
          <div class="inner">
            
            <header><h1>Příklad (1)</h1></header>
            
            
            <section>
<p>(examples/docker-simple)</p>
<div class="highlight"><pre><span></span><span class="lineno">1 </span><span class="k">FROM</span><span class="s"> nginx:alpine</span>
<span class="lineno">2 </span><span class="k">COPY</span> . /usr/share/nginx/html
</pre></div>


<p>Vytvoříme image: <code>docker build -t docker-simple:0.1 .</code>
Spustíme: <code>docker run -ti --rm -p 8881:8080 docker-simple:0.1</code></p>
<p><code>docker &lt;group&gt; [options] &lt;image&gt; [command]</code></p>
<p>http://localhost:8881</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
              <p>objasnit nginx:alpine</p>
            
            </section>
          </div>
          <footer>
            
              [5 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              12/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-13">
          <div class="inner">
            
            <header><h1>Příklad (2)</h1></header>
            
            
            <section><p>Zastavíme kontejner (běží na popředí): Ctrl+C (pošle SIGINT, ne SIGKILL)</p>
<p>Spustíme na pozadí: <code>docker run -d --name docker-simple -p 8881:8080 docker-simple:0.1</code></p>
<p>Ověříme, že běží:</p>
<ul>
<li>docker ps</li>
<li>docker logs -f docker-simple</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              13/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_footer slide-14">
          <div class="inner">
            
            <header><h1>Příklad (3)</h1></header>
            
            
            <section><p>Prozkoumáme kontejner (pocitově jsme už <em>jako kdyby</em> ve VM):</p>
<ul>
<li><code>docker exec -ti docker-simple sh</code></li>
<li><code>cd /usr/share/nginx/html</code></li>
<li><code>ls -l</code>:<div class="highlight"><pre><span></span><span class="lineno">1 </span>50x.html    Dockerfile  build.sh    index.html
</pre></div>

</li>
</ul>
<p>Pokusy:</p>
<ul>
<li><code>hostname</code></li>
<li><code>ps</code></li>
<li><code>ls -la /</code></li>
<li><code>uname -a</code></li>
<li><code>cat /etc/*release</code></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              14/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-15">
          <div class="inner">
            
            <header><h1>Příklad (4)</h1></header>
            
            
            <section><p>Uklidíme:</p>
<ul>
<li><code>exit</code></li>
<li><code>docker ps</code></li>
<li><code>docker stop/kill docker-simple</code></li>
<li><code>docker ps -a</code></li>
<li><code>docker rm/rm -f docker-simple</code></li>
<li><code>docker ps -a</code></li>
</ul>
<p>...a nikde nic...EPHEMERAL! :-)</p>
<p>(pozor, spolu s kontejnerem zmizí i vše, co vyprodukoval, pokud neprodukoval na VOLUME)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              15/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_footer slide-16">
          <div class="inner">
            
            <header><h1>docker kontext</h1></header>
            
            
            <section>
<p>...vraťme se ještě na slide <strong><a href="#slide:14">Příklad (3)</a></strong>: co tam dělá Dockerfile a build.sh???</p>
<p>Chtěli jsme to přece: <code>COPY . /usr/share/nginx/html</code></p>
<p>Řešení je snadné - filtrace kontextu pomocí <code>.dockerignore</code> (obdoba .gitignore) - např.:</p>
<div class="highlight"><pre><span></span><span class="lineno">1 </span>.git
<span class="lineno">2 </span>.cache
<span class="lineno">3 </span>target
<span class="lineno">4 </span>**/*.class
<span class="lineno">5 </span>*.md
<span class="lineno">6 </span>!README.md
</pre></div>

<p>...a pro náš příklad:</p>
<div class="highlight"><pre><span></span><span class="lineno">1 </span>*.sh
<span class="lineno">2 </span>Dockerfile*
</pre></div>

<p>Zkusme tedy nový build...   </p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              16/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-17">
          <div class="inner">
            
            <header><h1>Přestávka</h1></header>
            
            
            <section>
<p><img alt="docker-vs-vm" src="file:///home/amoravek/projects/trask/k8s-skoleni/presentation/coffee.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              17/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-18">
          <div class="inner">
            
            <header><h1>Dockerfile - příkazy (1)</h1></header>
            
            
            <section>
<p>Inspirace: <a href="https://repogit.trask.cz/git/BI_Docker">https://repogit.trask.cz/git/BI_Docker</a></p>
<p>Vybrané příkazy:</p>
<ul>
<li><a href="https://docs.docker.com/engine/reference/builder/#from"><code>FROM</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#add"><code>ADD</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#copy"><code>COPY</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#run"><code>RUN</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#user"><code>USER</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#workdir"><code>WORKDIR</code></a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              18/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-19">
          <div class="inner">
            
            <header><h1>Dockerfile - příkazy (2)</h1></header>
            
            
            <section><ul>
<li><a href="https://docs.docker.com/engine/reference/builder/#expose"><code>EXPOSE</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#volume"><code>VOLUME</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#entrypoint"><code>ENTRYPOINT</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#cmd"><code>CMD</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#env"><code>ENV</code></a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/#arg"><code>ARG</code></a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              19/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-20">
          <div class="inner">
            
            <header><h1>PID 1, exec vs shell formy</h1></header>
            
            
            <section>
<p>Existence kontejneru je přímo spojena s životem procesu s PID 1.</p>
<p>Rozdíl mezi:</p>
<ul>
<li>ENTRYPOINT "/app/bin/your-app arg1 arg2" (shell-form)</li>
<li>ENTRYPOINT ["/app/bin/your-app", "arg1", "arg2"] (exec-form)</li>
</ul>
<p>Pěkně vysvětleno: <a href="https://hynek.me/articles/docker-signals/">https://hynek.me/articles/docker-signals/</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [25 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              20/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-21">
          <div class="inner">
            
            <header><h1>Build, Vrstvy, multi-stage build</h1></header>
            
            
            <section>
<ul>
<li>Každý příkaz v rámci Dockerfile = vrstva v souborovém systému</li>
<li>vrstvy jsou read-only, zápisová je jen ta "vrchní"</li>
<li>copy-on-write</li>
<li>vhodná organizace vrstev tak, aby je nebylo nutné zbytečně buildovat/stahovat</li>
</ul>
<p>Příklad buildu + push, pull (docker-images/mdr)</p>
<p>Dokumentace: <a href="https://docs.docker.com/storage/storagedriver/">https://docs.docker.com/storage/storagedriver/</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [30 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              21/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-22">
          <div class="inner">
            
            <header><h1>Názvy images, Docker repository</h1></header>
            
            
            <section>
<p>Název image: <code>[host:port/]&lt;repository1&gt;/&lt;repository2&gt;/.../&lt;image-name&gt;[:&lt;image-version&gt;]</code></p>
<p>Např.:</p>
<ul>
<li>trask/tif/mdr:3.1.21</li>
<li>harbor.trask.cz/arm64/keycloak:12.0.1</li>
<li>localhost:5000/redis</li>
</ul>
<p>Pokud chybí verze image, použije se <code>latest</code> (má nevýhody)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              22/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-23">
          <div class="inner">
            
            <header><h1>Docker registry - secure/insecure, harbor.trask.cz</h1></header>
            
            
            <section>
<p><code>[host:port]</code> z předchozího slidu = docker registry (pozor, registry vs repository)</p>
<p>.....</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              23/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-24">
          <div class="inner">
            
            <header><h1>pull, push, tag, login/logout</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [10 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              24/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-25">
          <div class="inner">
            
            <header><h1>Přestávka na oběd</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [30 min - 1 h] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              25/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-26">
          <div class="inner">
            
            <header><h1>PID 1 podrobněji</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [30 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              26/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-27">
          <div class="inner">
            
            <header><h1>Uživatelské účty a oprávnění uvnitř kontejneru, USER</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              27/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-28">
          <div class="inner">
            
            <header><h1>Publikace portů, EXPOSE</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              28/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-29">
          <div class="inner">
            
            <header><h1>Volumes, mount, VOLUME</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              29/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-30">
          <div class="inner">
            
            <header><h1>Networking, komunikace mezi kontejnery</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              30/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-31">
          <div class="inner">
            
            <header><h1>Přestávka</h1></header>
            
            
            <section>
<p><img alt="docker-vs-vm" src="file:///home/amoravek/projects/trask/k8s-skoleni/presentation/coffee.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [15 min]
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              31/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-32">
          <div class="inner">
            
            <header><h1>Docker best practices</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [25 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              32/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-33">
          <div class="inner">
            
            <header><h1>Orchestrace – Docker Compose, Docker Swarm</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              33/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-34">
          <div class="inner">
            
            <header><h1>Přidělování CPU a paměti</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [5 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              34/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide has_footer slide-35">
          <div class="inner">
            
            <header><h1>Kontejnerizace Java aplikace, JIB</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [55 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              35/36
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: presentation.md -->
      <div class="slide-wrapper">
        <div class="slide slide-36">
          <div class="inner">
            
            <header><h1>Diskuse</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
              [55 min] 
            
            
            <aside class="source">
              Source: <a href="presentation.md">presentation.md</a>
            </aside>
            
            <aside class="page_number">
              36/36
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>

<!-- macro for generating subsection of TOC -->

<!-- end of macro -->

      <!-- generating sections of TOC -->
      
      <tr id="toc-row-1">
        <th><a href="#slide:1">Co to je Docker?</a></th>
        <td><a href="#slide:1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide:2">Srovnání s VM</a></th>
        <td><a href="#slide:2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide:3">Linux kernel</a></th>
        <td><a href="#slide:3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide:4">Motivace</a></th>
        <td><a href="#slide:4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide:5">Image</a></th>
        <td><a href="#slide:5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide:6">Parent a base image</a></th>
        <td><a href="#slide:6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide:7">Kontejner</a></th>
        <td><a href="#slide:7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide:8">Docker daemon</a></th>
        <td><a href="#slide:8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide:9">OCI</a></th>
        <td><a href="#slide:9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide:10">Docker CLI</a></th>
        <td><a href="#slide:10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide:11">Dockerfile</a></th>
        <td><a href="#slide:11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide:12">Příklad (1)</a></th>
        <td><a href="#slide:12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide:13">Příklad (2)</a></th>
        <td><a href="#slide:13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide:14">Příklad (3)</a></th>
        <td><a href="#slide:14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide:15">Příklad (4)</a></th>
        <td><a href="#slide:15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide:16">docker kontext</a></th>
        <td><a href="#slide:16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide:17">Přestávka</a></th>
        <td><a href="#slide:17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide:18">Dockerfile - příkazy (1)</a></th>
        <td><a href="#slide:18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide:19">Dockerfile - příkazy (2)</a></th>
        <td><a href="#slide:19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide:20">PID 1, exec vs shell formy</a></th>
        <td><a href="#slide:20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide:21">Build, Vrstvy, multi-stage build</a></th>
        <td><a href="#slide:21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide:22">Názvy images, Docker repository</a></th>
        <td><a href="#slide:22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide:23">Docker registry - secure/insecure, harbor.trask.cz</a></th>
        <td><a href="#slide:23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide:24">pull, push, tag, login/logout</a></th>
        <td><a href="#slide:24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide:25">Přestávka na oběd</a></th>
        <td><a href="#slide:25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide:26">PID 1 podrobněji</a></th>
        <td><a href="#slide:26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide:27">Uživatelské účty a oprávnění uvnitř kontejneru, USER</a></th>
        <td><a href="#slide:27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide:28">Publikace portů, EXPOSE</a></th>
        <td><a href="#slide:28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide:29">Volumes, mount, VOLUME</a></th>
        <td><a href="#slide:29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide:30">Networking, komunikace mezi kontejnery</a></th>
        <td><a href="#slide:30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide:31">Přestávka</a></th>
        <td><a href="#slide:31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide:32">Docker best practices</a></th>
        <td><a href="#slide:32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide:33">Orchestrace – Docker Compose, Docker Swarm</a></th>
        <td><a href="#slide:33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide:34">Přidělování CPU a paměti</a></th>
        <td><a href="#slide:34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide:35">Kontejnerizace Java aplikace, JIB</a></th>
        <td><a href="#slide:35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide:36">Diskuse</a></th>
        <td><a href="#slide:36">36</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide next slide</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
    <br>
    <strong>Generated with Darkslide 5.1.0</strong>
  </div>
  <script>main()</script>
</body>
</html>